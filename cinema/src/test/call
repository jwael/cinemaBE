@Test
fun `should create CRM role successfully without Call mock`() {
    val crmRoleData = CrmRoleData(
        crmCustomerData = CrmData(
            salesforceContactId = "CONTACT123",
            salesforceRoleId = null
        ),
        reconciliationId = ReconciliationId(
            batchReference = ReferenceId(value = "REF0010011"),
            rowReference = ReferenceId(value = "ROW001")
        ),
        batchId = "BATCH1212",
        rowNumber = 2
    )

    val crmClient = mockk<CrmClient>()
    val adapter = CrmCustomerProviderAdapter(crmClient)

    // On mock directement le retour de execute() de la m√©thode createRole
    every { crmClient.createRole(any(), any(), any()).execute() } returns
        Response.success(
            CrmRoleResponsePayload(
                crmStatus = RecordStepStatus.OK,
                crmMessage = "Role created",
                crmRoleId = "ROLE001"
            )
        )

    val result = adapter.createCrmRole(crmRoleData)

    assertThat(result.crmStatus).isEqualTo(RecordStepStatus.OK)
    assertThat(result.crmRoleId).isEqualTo("ROLE001")
}